{
    "dataset": {
        "csv_path": "data/news/train.csv",
        "batch_size": 32,
        "shuffle": true,
        "text_field": "text",
        "id_field": "id",
        "label_field": "label"
    },
    "preprocess": {
        "do_lowercase": true,
        "remove_urls": true,
        "remove_user_mentions": true,
        "max_tokens": 512,
        "enable_kg": true,
        "tokenizer": "jieba",
        "ltp_model_kwargs": {
            "pretrained_model_name_or_path": "LTP/small",
            "force_download": true,
            "cache_dir": "data/ltp_cache"
        }
    },
    "kg": {
        "endpoint_url": "https://query.wikidata.org/sparql",
        "user_agent": "KAN-KG-Client/0.1 (https://www.nankai.edu.cn; mailto:guojiarui@mail.nankai.edu.cn)",
        "timeout": 30,
        "max_neighbors": 32,
        "cache_dir": "data/kg_cache",
        "language": "zh"
    },
    "repr": {
        "text_vocab": {
            "min_freq": 1,
            "max_size": null,
            "pad_token": "<pad>",
            "unk_token": "<unk>",
            "bos_token": null,
            "eos_token": null
        },
        "entity_vocab": {
            "min_freq": 1,
            "max_size": null,
            "pad_token": "<pad>",
            "unk_token": "<unk>",
            "bos_token": null,
            "eos_token": null
        },
        "text_embedding": {
            "vocab_size": 0,
            "d_model": 768,
            "padding_idx": 0,
            "max_len": 512,
            "dropout": 0.1
        },
        "entity_embedding": {
            "vocab_size": 0,
            "d_model": 768,
            "padding_idx": 0,
            "dropout": 0.1,
            "share_entity_context_embeddings": true,
            "context_pooling": "mean"
        },
        "batching": {
            "add_bos_eos_text": false,
            "max_text_len": 0,
            "max_entities": 64,
            "max_context_per_entity": 32,
            "text_encoding": "bert",
            "bert_model_name_or_path": "bert-base-chinese",
            "bert_max_length": 512,
            "bert_truncation": "head"
        }
    },
    "text_encoder": {
        "d_model": 768,
        "nhead": 12,
        "num_layers": 1,
        "dim_feedforward": 2048,
        "dropout": 0.1,
        "activation": "gelu",
        "layer_norm_eps": 1e-5,
        "batch_first": true
    },
    "knowledge_encoder": {
        "share_encoder": false,
        "encoder": {
            "d_model": 768,
            "nhead": 12,
            "num_layers": 1,
            "dim_feedforward": 2048,
            "dropout": 0.1,
            "activation": "gelu",
            "batch_first": true,
            "layer_norm_eps": 1e-5,
            "max_seq_len": 512,
            "positional_encoding": "rope",
            "rope_theta": 10000.0
        }
    },
    "attention": {
        "d_model": 768,
        "nhead": 12,
        "dropout": 0.1,
        "bias": true,
        "batch_first": true
    },
    "training": {
        "num_epochs": 20,
        "learning_rate": 2e-5,
        "weight_decay": 0.0,
        "warmup_steps": 0,
        "gradient_clip": 1.0,
        "device": "cuda",
        "seed": 42,
        "output_dir": "train/models/weibo",
        "log_dir": "train/logs/weibo",
        "save_every": 1
    },
    "evaluation": {
        "device": "cuda",
        "seed": 42,
        "checkpoint_path": null,
        "results_csv": "train/results/results.csv",
        "threshold": 0.5,
        "has_labels": true,
        "compute_metrics": true
    },
    "bert_text_encoder": {
        "pretrained_model_name_or_path": "bert-base-chinese",
        "pooling": "mean+mask",
        "output_dropout": 0.1,
        "freeze_encoder": false,
        "max_length": 512,
        "return_sequence": true
    }
}